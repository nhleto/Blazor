@page "/counter"
@using Blazor.Model
@using System.Text.Json.Serialization
@using Newtonsoft.Json

<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="FetchData">Click me</button>
<p>@_status?.Status</p>

@code {
    private const string startupURL = "https://api.spacetraders.io/game/status";
    private int currentCount = 0;
    private bool display = false;
    static readonly HttpClient client = new HttpClient();
    private Response _status;

    private void IncrementCount() => currentCount += 1;

    private async void FetchData()
    {
        var response = await client.GetStringAsync(startupURL);
        _status = JsonConvert.DeserializeObject<Response>(await client.GetStringAsync(startupURL));
    }
}
